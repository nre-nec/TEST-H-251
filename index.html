<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%233b82f6%22%3E%3Cpath%20fill-rule%3D%22evenodd%22%20d%3D%22M6.75%202.25A.75.75%200%20017.5%203v1.5h9V3A.75.75%200%200118%202.25a.75.75%200%2001.75.75v1.5h.75a3%203%200%20013%203v11.25a3%203%200%2001-3%203H4.5a3%203%200%2001-3-3-V7.5a3%203%200%20013-3H5.25v-1.5A.75.75%200%20016%202.25a.75.75%200%2001.75.75v1.5h9V3a.75.75%200%2001-.75-.75zM6%2012a.75.75%200%2001.75-.75h10.5a.75.75%200%20010%201.5H6.75A.75.75%200%20016%2012zm0%204a.75.75%200%2001.75-.75h10.5a.75.75%200%20010%201.5H6.75A.75.75%200%2001-.75-.75z%22%20clip-rule%3D%22evenodd%22%20/%3E%3C/svg%3E" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>جدول المراقبات</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Cairo', sans-serif;
      }
      @keyframes pulse-slow {
        50% {
          opacity: .8;
        }
      }
      .animate-pulse-slow {
        animation: pulse-slow 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes fade-in {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      .animate-fade-in {
        animation: fade-in 0.5s ease-out forwards;
      }
      @keyframes fade-in-up {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-up {
        animation: fade-in-up 0.6s ease-out forwards;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-gray-50 text-gray-800">
    <div id="root"></div>

    <!-- Load UMD libraries -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Main application script -->
    <script type="text/babel" data-presets="react,typescript">
      window.onload = function() {
        const { useState, useMemo, FC, ReactNode } = React;
        
        // --- From types.ts ---
        const AppView = {
          SCHEDULE: 'schedule',
          QUERY: 'query',
          ADMIN: 'admin',
          STATS: 'stats',
        };
        
        // --- From data/scheduleData.ts ---
        const headers = [
            "2025-10-26 (9:00-10:00-صباحا)", "2025-10-26 (11:30-12:30-مساء)", "2025-10-26(4:00-5:00-مساء)", "2025-10-26(5:30-6:30-مساء)",
            "2025-10-27 (9:00-10:00-صباحا)", "2025-10-27 (11:30-12:30-مساء)", "2025-10-27(4:00-5:00-مساء)", "2025-10-27(5:30-6:30-مساء)",
            "2025-10-28 (9:00-10:00-صباحا)", "2025-10-28 (11:30-12:30-مساء)", "2025-10-28(4:00-5:00-مساء)", "2025-10-28(5:30-6:30-مساء)",
            "2025-10-29 (9:00-10:00-صباحا)", "2025-10-29 (11:30-12:30-مساء)", "2025-10-29(4:00-5:00-مساء)", "2025-10-29(5:30-6:30-مساء)",
            "2025-10-30 (9:00-10:00-صباحا)", "2025-10-30 (11:30-12:30-مساء)", "2025-10-30(4:00-5:00-مساء)", "2025-10-30(5:30-6:30-مساء)",
            "2025-11-02 (9:00-10:00-صباحا)", "2025-11-02 (11:30-12:30-مساء)", "2025-11-02(4:00-5:00-مساء)", "2025-11-02(5:30-6:30-مساء)",
            "2025-11-03 (9:00-10:00-صباحا)", "2025-11-03 (11:30-12:30-مساء)", "2025-11-03(4:00-5:00-مساء)", "2025-11-03(5:30-6:30-مساء)",
            "2025-11-04 (9:00-10:00-صباحا)", "2025-11-04 (11:30-12:30-مساء)", "2025-11-04(4:00-5:00-مساء)", "2025-11-04(5:30-6:30-مساء)",
            "2025-11-05 (9:00-10:00-صباحا)", "2025-11-05 (11:30-12:30-مساء)", "2025-11-05(4:00-5:00-مساء)", "2025-11-05(5:30-6:30-مساء)",
            "2025-11-06 (9:00-10:00-صباحا)", "2025-11-06(4:00-5:00-مساء)"
        ];
        const rawData = `
        أسماء ابراهيم عبدالعزيز عامر	A7				A7	A7			A7			D8	A7	A7			H6					B6			A7		C6		A7				A7		C7		A7	
        أمال هاشم محمد	A7		D7		A7	A7			A7		C6		A7	A7			H8					B6	C7							A7	C7		A7	A7				
        أماني لطفي أحمد عمارة	A8		C7		A8	A7			A7				A8	A7	F10		A7		D8			B6			A7				A7				A8	A7				
        أميرة مصطفى فهمي اسماعيل	A8				A8	A8			A8				A8	A8			A7	A7				B7			A7		C8		A7		C6		A8	A7				
        أنفال ساير مرحول الرويلي	B1				B1	A8			A8				B6	A8			A7					B7			A8				A8		D5	D6	B3	A8			A7	
        إدلينا سانتوس	B1				B1	A8			A8				B6	A8			A8					B7			A8				A8		C8		B3	A8			A7	C6
        إيمان مختار محمد جبر	B2				B2	B6			B6			D7	B7	B6		F7	A8					B8									D4	D6	B6					D6
        اسماء عبدالله احمد حسين	B2		D7		B2	B6			B6				B7	B6			A8					B8	B8		A8				A8				B6	A8				D7
        اشراقه عبيد محمد صالح	B3				B3	B6	D5		B6				B8	B6	F9		B6					B8			B6				B6				B7	B6				
        ايمان محمد محمد ابوبكر	B3				B3	B7	D6		B7				B8	B7		F7	B6					C6	C7		B6								B7	B6	D8			
        بتعة محمود محمد إسماعيل	B6				B6	B7			B7			D8	C2	B7			B7					C6	C6		B6				B6				B8	B6			A8	
        براء طعمة ابوالسل	B6				B6	B7			B7				C2	B7		F7	B7			D7		C6		B7	B7				B6	A7			B8					
        جيهان احمد البهلوان	B7				B7	B8			B8		C7		C6	B8			B7					C7	C6		B7				B7			C9	C2	B7				
        dalia محمد فتحي عبد المقصود	B7				B7	B8			B8				C6	B8			B8					C7			B7				B7	A7	D5		C2	B7	D8			
        رانيا عبد الخالق جودة الحسين	B8				B8	B8			B8				C7	B8			B8	A7				C7			B8				B7	A8			C6	B7			A8	
        rcha عبدالحليم  القاضي	B8	A7			B8	C2			C6				C7	D6			C6					C8			B8				C7	A8			C6	B8			A8	
        رولا حسن محمد ازهري	C6		D7		C2	C2			C7				C8	D6			C7	A7				C8			C6				C7				C7	B8				
        ريم علي حوفان الشمراني	C7	A7			C6	C6			C7	A7			C9	D7			C7	A8																				
        زينب ربيع عبد المرضي	C7				C6	C6			C7			D7	C9	D7			C7					C9			C6		F9		C8				C8	C6				C9
        سارة رويشد خويتيم العنزي	C8				C7	C6			C8	A7			D4	D7			C8	A8				C9			C7		C9	A7	C8				C8					
        سلوي محمد جميل  الوفائي	C8	A7			C7	F10			C8				D4	D8			C8	A8				C9			C7					C6			C9				C6	C8
        سهام شحاته مصطفى مرزوق	D1	A8			C8	F10	D5		C8				D6	D8		A7	C9					D6			C7					C6			C9				C6	
        سيرلي أجنود	D1		D8		C8	F10			C9				D6	D8			C9	B6				D6			C8	C7				C6			D4				C7	
        شهد زياد علي الدندن	D4				C9	F8	D7		C9				D7				D6	B6				D6			C8	C7	C6			C7			D4				C7	
        ضحى عبد الهادي  محمد	D4				C9	F8	D5		C9	A7			D7				D6	B6	D8	D7		D8			C8	C7							D5					
        عايدة أحمد محمد إبراهيم	D5				D5	F8	D6		D5	A8			D8				D7	B7		D7	A7				C9		C7						D5					D6
        غادة صبحي حسن	D5				D5	F9			D5	A8			D8				D7	B7			A7			B7	C9					C7			D6	C6				D7
        فاتن فتحى أحمد محفوظ	D6				D6	F9			D6	A8			E10		F9		E6	B7			A7				C9		C7						D6	C6				C8
        لمياء عبد الحكيم على غراب	D6		D8		D6				D6	B6			E10				E6	B8			A8				E10		F9			C7			D7	C7			C7	
        مآثر جدعان عبدالحمن الجديع	D7				D7				D6	B6			E6		F9		E8	B8			A8				E10			F10		C8			D7				C8	C9
        مثايل فهد مبارك الشمري	D7				D7				D7	B6			E6				E8	B8		D6	A8	D8			E10	C8				C8			D8	C7				
        ملاك محمد يحيى يعقوب	D8				D8				D7	B7			E8			A8	E9	C6			B6				E9	C8				C8			D8	C7			C8	
        منال سلطان مداد الرويلي	D8				D8				D7	B7			E8				E9	C6			B6				E9	C9				C9			E6	C9			C8	D7
        منال محمد أحمد عبدالعزيز	E10	A8			E10				D8	B7			E9			A8	F10	C6			B6				E9			F10		C9		D6	E6					
        منى تيمان إدريس قصب	E10	A8			E10				D8	B8			E9				F10	C7			B7				F10	C10		D4		C9		D7	E8					
        مها ابراهيم فؤاد العشري فودة	E6				E6				D8	B8			F2				F10	C7			B7				F10	C11				D6	C7		E8				C9	C6
        نجود عواد عودة العطوى	E6				E6				F10	B8			F2				F6	C7	C8		B7				F10	C12				D6	C6	D7	E9					
        ندى صقر حويل الرويلي	E8				E8				F10	D6			F5			A8	F6	D6	D8		D6				F6	C13				D6			E9				C9	
        nرجس محمد محمد صيام	E8				E8				F10	D6			F5			A8	F7	D6	C9		D6		B8		F6	C14							F6				C9	
        نعيمة محمد السيد احمد	E9				E9		D7		F8	D6			F6				F7	D6			D6				F6	C15	C8	D5				C9	F6					
        هبة أحمد عبدالمعطي	E9				E9		D7		F8	D7			F6				F8	D7		D6	D7		B8		F7	C16							F7				D6	
        هدايا إسماعيل أبو bكر إسماعيل	F8				F1		D8		F8				F7				F8	D7			D7				F7	C17	C9		C8	D7			F7				D6	
        هدي محمد عبد الرحمن فليفل	F8				F1		D8		F9				F7		F10		F9	D7		C6	D7				F7	C18						C8	F8				D6	
        هند ابو السعود أحمد الصعيدي	F9				F10				F9	D7			F8		C8		F9	D8			D8				F8	C19			C9	D7			F8				D7	
        هويدا محمد علي حسن			C9									D7			C9	A7		D8		D6	D8	D8		B7	F8	C8			C9	D7			F9	C9			D7	
        ياسمين سالم دراق	F9				F10	F9			F9	D7			F8				F9	D8			D8				F8				C9		D4		F9	C9			D7	
        نبيلة سالم محمد سالم					F2																																	
        نهيد الخطيب					F2																																	
        إدارية 1					F5																																	
        إدارية 2					F5																																	
        إدارية3					F6																																	
        إدارية 4					F6																																	
        إدارية 5					F9																																	
        إدارية 6					F9																																	
        إدارية 7	C6				C2								C8				C6																C7					
        أحمد جمال الدين محمد	G1				G1				G1	G1			G1		C6		G3	G1				G1			G5	G1			G1				G1		C7		G1	
        أحمد محمد وهبة السيد	G1		C7		G1				G1	G1			G1	G1		A7	G3			C7		G1			G5								G1	G1			G1	
        أشرف أمين  الطحان	G2				G2				G2	G1			G2	G1	C8		G4	G1			G1				G5	G1							G3	G1			G2	
        ابراهيم احمد محمد السماحي	G2		C8		G2				G2	G3			G2		C7		G4	G1		C6					G6							C8	G3	G2			G2	
        بشارة إلياس حمدتو	G3				G3		C7		G6	G3			G5		C6		G5	G2										A7	G1	G1			G4	G2			G3	
        دانيال جوزيف إسبينا	G3				G3	G1			G6	G3			G5	G1			G5	G2			G1				G6				G1				G4	G4			G3	
        سلطان عيادة ثاني الشمري	G6				G4				G7	G4		C9	G6	G2			G6	G2							G6			A7		G1			G5				G4	C6
        سمير هاشم هاشم خليفة	G6				G4	G1			G7	G4			G6	G2			G6	G3			G1	G1			G7				G2	G1			G5				G4	
        عبد القادر الأمين الأمين	G7		C9		G5	G1			G8			C8	G7	G2		A7	G7		C8	C7					G7								G6				G5	
        عدنان فارس مزهي العنزي	G7		C7		G5	G2	C8		G8			C9	G7	G3	C9		G7			C6					G7	G1							G6					
        علي  حسين عبد المجيد محمد	H3				G6	G2			H1				H2	G3	C7		G8		C9			G3	C6		G8				G2	G4			G7					
        عماد محمد محمد عبد التواب	H3				G6	G2			H1			C8	H2	G3	C8		G8	G3			G2				G8		C9		G2				G7					
        عمر محمد فضل المولى سعيد	H4				G7	G3	C8		H2		C7		H3	G4			H1	G3			G2				G8				G3				G8		C7			
        عمرو محمود عبد الدايم محمد	H4				G7	G3			H2				H3	G4			H1		C9		G2				H1		C8			G4		C9	G8					C8
        كريم محمد عبدالهادي	H5				G8	G3			H4				H4	G4	C6		H3	G4		C6	G3				H1					G4		C8	H1					
        محمد السيد مصطفى عبد العال	H5	G1	C8		G8	G5			H4	G4			H4	G7	C7		H3	G4		C7					H2								H1					
        محمد محمود ابراهيم هلال	H6	G1			H1	G5							H5	G7			H4	G4	C8						H2		C8						H3		C7			C9
        محمد مصطفى محمود سلطان	H6	G1			H1	G5			H4				H5	G7			H4	G7	C9		G3				H3			A7					H3					C6
        موسي عبدالفتاح موسي حسن	H7	G2			H2	G6	C7		H5		C6	C9	H6	G8	C6		H5	G7							H3								H6					
        نداء هزاع نداء الشمرى	H7	G2			H2	G6			H5			C8	H6	G8	C8		H5	G7				G3			H4				G3				H6					
        ولاء عطية الدسوقي عسكر	H8	G2			H4	G6			H5				H7	G8			H6				G3	G3			H4				G3				H7	G4			G5	
        صلاح علوي حسين الشرفي	H8				H4								H7				H8										C6						H7					
        مطارد دخيل ناصر العنزي					H5								H8																									
        اياد الناجي					H5		C7						H8																									
        احمد بسيوني					H7																										C6							
        اداري ا					H7																																	
        نهى مرعي 																																						
        وفاء فايز												D8																										
        رباب صبري																											F9											
        وائل العنزي																																			C8			
        `;
        const invigilatorData = rawData
          .trim()
          .split('\n')
          .map(line => {
            const cells = line.split('\t');
            const name = cells[0].trim();
            const schedule = {};
            headers.forEach((header, index) => {
              const assignment = cells[index + 1] ? cells[index + 1].trim() : '';
              if (assignment) {
                schedule[header] = assignment;
              }
            });
            return { name, schedule };
          })
          .filter(invigilator => invigilator.name);

        // --- From components/LoginModal.tsx ---
        const LoginModal = ({ onClose, onSuccess }) => {
          const [password, setPassword] = useState('');
          const [error, setError] = useState('');
          const CORRECT_PASSWORD = '202030305';

          const handleSubmit = (e) => {
            e.preventDefault();
            if (password === CORRECT_PASSWORD) {
              onSuccess();
            } else {
              setError('كلمة المرور غير صحيحة. حاول مرة أخرى.');
              setPassword('');
            }
          };

          return (
            <div className="fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 transition-opacity duration-300">
              <div className="bg-white rounded-2xl shadow-2xl p-8 m-4 max-w-sm w-full transform transition-all duration-300 scale-95 hover:scale-100">
                <div className="flex justify-between items-center mb-6">
                  <h2 className="text-2xl font-bold text-gray-800">الوصول مطلوب</h2>
                  <button onClick={onClose} className="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                <p className="text-gray-600 mb-6">
                  هذه المنطقة محمية. يرجى إدخال كلمة المرور للمتابعة.
                </p>
                <form onSubmit={handleSubmit}>
                  <div className="mb-4">
                    <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-2">
                      كلمة المرور
                    </label>
                    <input
                      type="password"
                      id="password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      placeholder="ادخل كلمة المرور هنا"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow"
                      autoFocus
                    />
                  </div>
                  {error && <p className="text-red-500 text-sm mb-4">{error}</p>}
                  <button
                    type="submit"
                    className="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-transform transform hover:scale-105"
                  >
                    دخول
                  </button>
                </form>
              </div>
            </div>
          );
        };

        // --- From components/Header.tsx ---
        const AnimatedIcon = ({ children }) => (
            <div className="relative inline-block transition-transform duration-300 ease-in-out hover:scale-110 animate-pulse-slow">
                {children}
            </div>
        );
        const Header = ({ currentView, onTabClick, isAuthenticated, onLogout }) => {
          const getTabClass = (view) => {
            return `flex items-center gap-2 px-4 py-2 text-sm font-bold rounded-t-lg transition-colors duration-300 ${
              currentView === view
                ? 'bg-white text-blue-600 shadow-md'
                : 'bg-transparent text-white hover:bg-white/20'
            }`;
          };

          return (
            <header className="bg-gradient-to-r from-blue-600 to-indigo-700 p-4 shadow-lg text-white">
              <div className="container mx-auto flex justify-between items-center">
                <div className="flex items-center gap-2">
                    <AnimatedIcon>
                        <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-yellow-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                            <path strokeLinecap="round" strokeLinejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                    </AnimatedIcon>
                    <h1 className="text-xl font-bold">جدول مراقبات الاختبارات</h1>
                </div>
                
                <nav className="flex items-center border-b-2 border-white/20">
                  <button className={getTabClass(AppView.QUERY)} onClick={() => onTabClick(AppView.QUERY)}>
                    استعلام
                  </button>
                  <button className={getTabClass(AppView.SCHEDULE)} onClick={() => onTabClick(AppView.SCHEDULE)}>
                    جدول المراقبين {!isAuthenticated && '🔒'}
                  </button>
                  <button className={getTabClass(AppView.ADMIN)} onClick={() => onTabClick(AppView.ADMIN)}>
                     لجنة الاختبارات {!isAuthenticated && '🔒'}
                  </button>
                  <button className={getTabClass(AppView.STATS)} onClick={() => onTabClick(AppView.STATS)}>
                    إحصائيات {!isAuthenticated && '🔒'}
                  </button>
                </nav>

                {isAuthenticated && (
                    <button 
                        onClick={onLogout}
                        className="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-transform duration-200 hover:scale-105"
                    >
                        تسجيل الخروج
                    </button>
                )}
              </div>
            </header>
          );
        };

        // --- From components/ScheduleView.tsx ---
        const parseHeader = (header) => {
            const match = header.match(/(\d{4}-\d{2}-\d{2})\s?\((\d{1,2}:\d{2}-\d{1,2}:\d{2})-(صباحا|مساء)\)?/);
            if (!match) return { date: header, time: '', period: '' };
            return {
                date: match[1],
                time: match[2],
                period: match[3],
            };
        };
        const ScheduleView = () => {
            const [searchTerm, setSearchTerm] = useState('');

            const filteredData = useMemo(() => {
                if (!searchTerm) return invigilatorData;
                return invigilatorData.filter(invigilator =>
                    invigilator.name.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }, [searchTerm]);

            const groupedHeaders = useMemo(() => {
                const groups = {};
                headers.forEach(h => {
                    const { date } = parseHeader(h);
                    if (!groups[date]) {
                        groups[date] = [];
                    }
                    groups[date].push(h);
                });
                return groups;
            }, []);

            const dates = Object.keys(groupedHeaders);

            return (
                <div className="bg-white p-6 rounded-2xl shadow-lg">
                    <div className="flex justify-between items-center mb-6">
                         <h2 className="text-3xl font-bold text-gray-800">جدول المراقبة العام</h2>
                         <div className="relative">
                            <input
                                type="text"
                                placeholder="ابحث عن مراقب..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-72 px-4 py-2 pr-10 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                            />
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 absolute right-3 top-1/2 -translate-y-1/2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                         </div>
                    </div>
                   
                    <div className="overflow-x-auto border border-gray-200 rounded-lg">
                        <table className="min-w-full divide-y divide-gray-200">
                            <thead className="bg-gray-100 sticky top-0 z-10">
                                <tr>
                                    <th scope="col" className="sticky right-0 bg-gray-200 px-6 py-3 text-right text-xs font-bold text-gray-600 uppercase tracking-wider z-20">
                                        اسم المراقب
                                    </th>
                                    {dates.map(date => (
                                        <th key={date} colSpan={groupedHeaders[date].length} className="px-6 py-3 text-center text-xs font-bold text-gray-600 uppercase tracking-wider border-r border-gray-300">
                                            {new Date(date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}
                                        </th>
                                    ))}
                                </tr>
                                <tr>
                                    <th className="sticky right-0 bg-gray-100 z-20"></th>
                                    {headers.map((header) => {
                                        const { time, period } = parseHeader(header);
                                        return (
                                            <th key={header} className="px-3 py-3 text-center text-xs font-medium text-gray-500 border-r border-gray-300">
                                                <div>{time}</div>
                                                <div className={`text-xs ${period === 'صباحا' ? 'text-yellow-600' : 'text-indigo-600'}`}>{period === 'صباحا' ? 'AM' : 'PM'}</div>
                                            </th>
                                        );
                                    })}
                                </tr>
                            </thead>
                            <tbody className="bg-white divide-y divide-gray-200">
                                {filteredData.map((invigilator) => (
                                    <tr key={invigilator.name} className="hover:bg-blue-50 transition-colors duration-200">
                                        <td className="sticky right-0 bg-white hover:bg-blue-50 px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 z-10">
                                            {invigilator.name}
                                        </td>
                                        {headers.map((header) => (
                                            <td key={`${invigilator.name}-${header}`} className="px-3 py-4 whitespace-nowrap text-center text-sm text-gray-700 border-r border-gray-200">
                                                {invigilator.schedule[header] ? (
                                                    <span className="px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 animate-fade-in">
                                                        {invigilator.schedule[header]}
                                                    </span>
                                                ) : (
                                                    <span className="text-gray-300">-</span>
                                                )}
                                            </td>
                                        ))}
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    {filteredData.length === 0 && (
                        <div className="text-center py-10 text-gray-500">
                            <p>لم يتم العثور على مراقبين يطابقون بحثك.</p>
                        </div>
                    )}
                </div>
            );
        };

        // --- From components/AdminView.tsx ---
        const AdminStatCard = ({ title, value, icon, color }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg flex items-center gap-6 transition-transform duration-300 hover:-translate-y-2">
                <div className={`w-16 h-16 rounded-full flex items-center justify-center ${color}`}>
                    {icon}
                </div>
                <div>
                    <p className="text-gray-500 text-sm font-medium">{title}</p>
                    <p className="text-3xl font-bold text-gray-800">{value}</p>
                </div>
            </div>
        );
        const AdminView = () => {
            const [selectedDate, setSelectedDate] = useState('');
            const [selectedPeriod, setSelectedPeriod] = useState('');

            const summary = useMemo(() => {
                const totalInvigilators = invigilatorData.length;
                const totalSlots = headers.length;
                let totalAssignments = 0;
                const assignmentsPerSlot = {};
                headers.forEach(h => assignmentsPerSlot[h] = 0);

                invigilatorData.forEach(inv => {
                    const assignments = Object.keys(inv.schedule).length;
                    totalAssignments += assignments;
                    Object.keys(inv.schedule).forEach(slot => {
                        if (assignmentsPerSlot[slot] !== undefined) {
                            assignmentsPerSlot[slot]++;
                        }
                    });
                });
                
                const busiestSlot = Object.entries(assignmentsPerSlot).reduce((max, entry) => entry[1] > max[1] ? entry : max, ["", 0]);
                const leastBusySlot = Object.entries(assignmentsPerSlot).reduce((min, entry) => entry[1] < min[1] ? entry : min, ["", Infinity]);

                return { totalInvigilators, totalSlots, totalAssignments, busiestSlot, leastBusySlot, assignmentsPerSlot };
            }, []);

            const availableDates = useMemo(() => {
                const dates = new Set(headers.map(h => {
                    const match = h.match(/(\d{4}-\d{2}-\d{2})/);
                    return match ? match[1] : null;
                }).filter(Boolean));
                return Array.from(dates).sort();
            }, []);

            const availablePeriods = useMemo(() => {
                if (!selectedDate) return [];
                const periods = headers
                    .filter(h => h.includes(selectedDate))
                    .map(h => {
                        const simplePeriodMatch = h.match(/(\d{1,2}:\d{2}-\d{1,2}:\d{2})-(صباحا|مساء)/)
                        const simplePeriod = simplePeriodMatch ? `${simplePeriodMatch[1]}-${simplePeriodMatch[2]}` : null;
                        return simplePeriod;
                    })
                    .filter(Boolean);
                return Array.from(new Set(periods));
            }, [selectedDate]);

            const handleDateChange = (e) => {
                setSelectedDate(e.target.value);
                setSelectedPeriod('');
            };

            const queryResults = useMemo(() => {
                if (!selectedDate || !selectedPeriod) return null;

                const fullHeader = headers.find(h => h.includes(selectedDate) && h.includes(selectedPeriod));
                if (!fullHeader) return null;

                const assignments = invigilatorData
                    .filter(inv => inv.schedule[fullHeader])
                    .map(inv => ({
                        name: inv.name,
                        location: inv.schedule[fullHeader],
                    }));

                if (assignments.length === 0) return {};

                const groupedByLocation = assignments.reduce((acc, curr) => {
                    const location = curr.location;
                    if (!acc[location]) {
                        acc[location] = [];
                    }
                    acc[location].push(curr.name);
                    return acc;
                }, {});

                return groupedByLocation;
            }, [selectedDate, selectedPeriod]);


            return (
                <div className="space-y-8">
                    <h2 className="text-3xl font-bold text-gray-800">لوحة لجنة الاختبارات</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <AdminStatCard title="إجمالي المراقبين" value={summary.totalInvigilators} color="bg-blue-100 text-blue-600" icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.125-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.125-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>} />
                        <AdminStatCard title="إجمالي الفترات" value={summary.totalSlots} color="bg-green-100 text-green-600" icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>} />
                        <AdminStatCard title="إجمالي التكليفات" value={summary.totalAssignments} color="bg-yellow-100 text-yellow-600" icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>} />
                    </div>

                     <div className="bg-white p-6 rounded-xl shadow-lg mt-8">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">استعلام عن فترة مراقبة</h3>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div>
                                <label htmlFor="date-select" className="block text-sm font-medium text-gray-700 mb-1">اختر التاريخ</label>
                                <select id="date-select" value={selectedDate} onChange={handleDateChange} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                    <option value="" disabled>-- اختر يوماً --</option>
                                    {availableDates.map(date => <option key={date} value={date}>{new Date(date).toLocaleDateString('ar-EG', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</option>)}
                                </select>
                            </div>
                            <div>
                                <label htmlFor="period-select" className="block text-sm font-medium text-gray-700 mb-1">اختر الفترة</label>
                                <select id="period-select" value={selectedPeriod} onChange={(e) => setSelectedPeriod(e.target.value)} disabled={!selectedDate} className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-50">
                                    <option value="" disabled>-- اختر فترة --</option>
                                    {availablePeriods.map(p => <option key={p} value={p}>{p}</option>)}
                                </select>
                            </div>
                        </div>

                        <div className="mt-4 min-h-[200px]">
                            {queryResults ? (
                                Object.keys(queryResults).length > 0 ? (
                                     <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                        {Object.entries(queryResults).map(([location, invigilators], index) => (
                                            <div key={location} className="bg-gray-50 border border-gray-200 rounded-lg p-4 animate-fade-in-up" style={{ animationDelay: `${index * 50}ms` }}>
                                                <h4 className="font-bold text-lg text-blue-600 mb-2">قاعة: {location}</h4>
                                                <ul className="space-y-1 list-disc list-inside">
                                                    {invigilators.map(name => <li key={name} className="text-gray-700">{name}</li>)}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="text-center py-10 text-gray-500">
                                        <p>لا يوجد مراقبون مكلفون في هذه الفترة.</p>
                                    </div>
                                )
                            ) : (
                                <div className="text-center py-10 text-gray-500">
                                    <p>يرجى اختيار تاريخ وفترة لعرض المراقبين.</p>
                                </div>
                            )}
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-xl shadow-lg">
                        <h3 className="text-xl font-bold text-gray-800 mb-4">قائمة المراقبين</h3>
                        <div className="max-h-96 overflow-y-auto">
                            <ul className="divide-y divide-gray-200">
                                {invigilatorData.map((inv, index) => (
                                     <li key={inv.name} className="p-4 flex justify-between items-center hover:bg-gray-50">
                                        <div>
                                            <span className="font-medium text-gray-900">{inv.name}</span>
                                        </div>
                                        <span className="text-sm text-gray-500">{Object.keys(inv.schedule).length} تكليفات</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>
                </div>
            );
        };

        // --- From components/StatsView.tsx ---
        const parseHeaderForStats = (header) => {
            const match = header.match(/(\d{4}-\d{2}-\d{2})\s?\((\d{1,2}:\d{2}-\d{1,2}:\d{2})-(صباحا|مساء)\)?/);
            if (!match) return { date: header, time: '', period: '' };
            return {
                date: match[1],
                time: match[2],
                period: match[3],
            };
        };
        const StatsStatCard = ({ title, name, value, color, icon }) => (
            <div className="bg-white p-6 rounded-xl shadow-lg flex flex-col gap-2 transition-transform duration-300 hover:-translate-y-2">
                <div className="flex items-center gap-4">
                    <div className={`w-12 h-12 rounded-full flex items-center justify-center ${color}`}>
                        {icon}
                    </div>
                    <p className="text-gray-500 font-medium">{title}</p>
                </div>
                <p className="text-xl font-bold text-gray-800 pr-2">{name}</p>
                <p className="text-lg text-gray-600 pr-2">{value} تكليفات</p>
            </div>
        );
        const StatsView = () => {
            const stats = useMemo(() => {
                const invigilatorWorkload = invigilatorData.map(inv => ({
                    name: inv.name,
                    assignments: Object.keys(inv.schedule).length
                })).sort((a, b) => b.assignments - a.assignments);
                
                const locationDistribution = {};
                invigilatorData.forEach(inv => {
                    Object.values(inv.schedule).forEach(location => {
                        locationDistribution[location] = (locationDistribution[location] || 0) + 1;
                    });
                });
                const locationData = Object.entries(locationDistribution)
                    .map(([name, count]) => ({ name, count }))
                    .sort((a,b) => b.count - a.count);

                const scheduleDetails = headers.map(header => {
                    const { date, time, period } = parseHeaderForStats(header);
                    const assignments = invigilatorData.filter(inv => inv.schedule[header]);
                    const locations = assignments.map(inv => inv.schedule[header]);
        
                    return {
                        date,
                        time,
                        period,
                        invigilatorCount: assignments.length,
                        locations: [...new Set(locations)].join(', ')
                    };
                });

                return {
                    invigilatorWorkload,
                    busiestInvigilator: invigilatorWorkload[0],
                    leastBusyInvigilator: invigilatorWorkload[invigilatorWorkload.length - 1],
                    locationData,
                    scheduleDetails
                };
            }, []);

            return (
                <div className="space-y-8">
                    <h2 className="text-3xl font-bold text-gray-800">إحصائيات المراقبة</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <StatsStatCard 
                            title="المراقب الأكثر تكليفاً" 
                            name={stats.busiestInvigilator.name} 
                            value={stats.busiestInvigilator.assignments} 
                            color="bg-green-100 text-green-600"
                            icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>}
                        />
                        <StatsStatCard 
                            title="المراقب الأقل تكليفاً" 
                            name={stats.leastBusyInvigilator.name} 
                            value={stats.leastBusyInvigilator.assignments} 
                            color="bg-red-100 text-red-600"
                            icon={<svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" /></svg>}
                        />
                    </div>

                    <div className="bg-white p-6 rounded-xl shadow-lg">
                        <h3 className="text-xl font-bold text-gray-800 mb-6">تفاصيل جدول الاختبارات</h3>
                        <div className="overflow-x-auto border border-gray-200 rounded-lg">
                            <table className="min-w-full divide-y divide-gray-200">
                                <thead className="bg-gray-50">
                                    <tr>
                                        <th scope="col" className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">التاريخ</th>
                                        <th scope="col" className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">اليوم</th>
                                        <th scope="col" className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">الفترة</th>
                                        <th scope="col" className="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">عدد المراقبين</th>
                                        <th scope="col" className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">القاعات المستخدمة</th>
                                    </tr>
                                </thead>
                                <tbody className="bg-white divide-y divide-gray-200">
                                    {stats.scheduleDetails.map((slot, index) => (
                                        <tr key={index} className="hover:bg-gray-50 transition-colors duration-200">
                                            <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                                {new Date(slot.date).toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric' })}
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                {new Date(slot.date).toLocaleDateString('ar-EG', { weekday: 'long' })}
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                <div className="font-semibold">{slot.time}</div>
                                                <div className={`text-xs ${slot.period === 'صباحا' ? 'text-amber-600' : 'text-indigo-600'}`}>
                                                    {slot.period}
                                                </div>
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">
                                                <span className="px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">
                                                    {slot.invigilatorCount}
                                                </span>
                                            </td>
                                            <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                                {slot.locations || '-'}
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- From components/QueryView.tsx ---
        const QueryView = () => {
            const [selectedInvigilatorName, setSelectedInvigilatorName] = useState('');

            const handleSelectChange = (e) => {
                setSelectedInvigilatorName(e.target.value);
            };

            const selectedInvigilator = useMemo(() => {
                return invigilatorData.find(inv => inv.name === selectedInvigilatorName);
            }, [selectedInvigilatorName]);

            const groupedSchedule = useMemo(() => {
                if (!selectedInvigilator) return null;

                const groups = {};
                
                Object.entries(selectedInvigilator.schedule).forEach(([header, location]) => {
                    const match = header.match(/(\d{4}-\d{2}-\d{2})\s?\((\d{1,2}:\d{2}-\d{1,2}:\d{2})-(صباحا|مساء)\)?/);
                    if (match) {
                        const [, date, time, period] = match;
                        if (date && time && period) {
                            if (!groups[date]) {
                                groups[date] = [];
                            }
                            groups[date].push({ time, period, location });
                        }
                    }
                });

                for (const date in groups) {
                    groups[date].sort((a, b) => {
                        const timeA = a.time.split('-')[0].replace(':', '.');
                        const timeB = b.time.split('-')[0].replace(':', '.');
                        return parseFloat(timeA) - parseFloat(timeB);
                    });
                }
                
                const sortedDates = Object.keys(groups).sort((a, b) => new Date(a).getTime() - new Date(b).getTime());
                
                const sortedGroups = {};
                sortedDates.forEach(date => {
                    sortedGroups[date] = groups[date];
                });

                return sortedGroups;

            }, [selectedInvigilator]);

            return (
                <div className="bg-white p-6 rounded-2xl shadow-lg animate-fade-in max-w-4xl mx-auto">
                    <h2 className="text-3xl font-bold text-gray-800 mb-6 text-center">استعلام عن جدول مراقب</h2>
                    
                    <div className="mb-8 max-w-lg mx-auto">
                        <label htmlFor="invigilator-select" className="block text-lg font-medium text-gray-700 mb-2 text-center">
                            اختر المراقب لعرض جدوله
                        </label>
                        <select
                            id="invigilator-select"
                            value={selectedInvigilatorName}
                            onChange={handleSelectChange}
                            className="w-full px-4 py-3 text-base border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition appearance-none text-center"
                        >
                            <option value="" disabled>-- اختر مراقباً --</option>
                            {invigilatorData.map(inv => (
                                <option key={inv.name} value={inv.name}>{inv.name}</option>
                            ))}
                        </select>
                    </div>

                    <div className="mt-8 min-h-[300px]">
                        {selectedInvigilator && groupedSchedule ? (
                            <div className="space-y-6">
                                <h3 className="text-2xl font-bold text-center text-blue-600 animate-fade-in">{selectedInvigilator.name}</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    {Object.entries(groupedSchedule).map(([date, assignments], index) => (
                                        <div key={date} className="bg-slate-50 border border-slate-200 rounded-xl p-4 shadow-sm animate-fade-in-up" style={{ animationDelay: `${index * 50}ms` }}>
                                            <p className="font-bold text-lg text-gray-800 mb-3 pb-2 border-b border-slate-300">
                                                {new Date(date).toLocaleDateString('en-US', { weekday: 'long', day: 'numeric', month: 'long' })}
                                            </p>
                                            <ul className="space-y-2">
                                                {assignments.map((a, i) => (
                                                    <li key={i} className="flex justify-between items-center text-sm">
                                                        <div className="flex items-center gap-2">
                                                            <span className={`font-semibold ${a.period === 'صباحا' ? 'text-amber-600' : 'text-indigo-600'}`}>{a.period === 'صباحا' ? 'AM' : 'PM'}</span>
                                                            <span className="text-gray-600">{a.time}</span>
                                                        </div>
                                                        <span className="px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">{a.location}</span>
                                                    </li>
                                                ))}
                                            </ul>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ) : (
                            <div className="text-center py-12 text-gray-500 flex flex-col items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={1}>
                                    <path strokeLinecap="round" strokeLinejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                <p className="text-lg">سيظهر جدول المراقب المختار هنا.</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- From App.tsx ---
        const App = () => {
          const [currentView, setCurrentView] = useState(AppView.QUERY);
          const [isAuthenticated, setIsAuthenticated] = useState(false);
          const [isLoginModalOpen, setIsLoginModalOpen] = useState(false);
          const [protectedView, setProtectedView] = useState(null);

          const handleTabClick = (view) => {
            if (view === AppView.SCHEDULE || view === AppView.ADMIN || view === AppView.STATS) {
              if (isAuthenticated) {
                setCurrentView(view);
              } else {
                setProtectedView(view);
                setIsLoginModalOpen(true);
              }
            } else {
              setCurrentView(view);
            }
          };

          const handleLoginSuccess = () => {
            setIsAuthenticated(true);
            setIsLoginModalOpen(false);
            if (protectedView) {
              setCurrentView(protectedView);
              setProtectedView(null);
            }
          };
          
          const handleLogout = () => {
            setIsAuthenticated(false);
            setCurrentView(AppView.QUERY);
          };

          const renderView = () => {
            switch (currentView) {
              case AppView.SCHEDULE:
                return isAuthenticated ? <ScheduleView /> : null;
              case AppView.ADMIN:
                return isAuthenticated ? <AdminView /> : null;
              case AppView.STATS:
                return isAuthenticated ? <StatsView /> : null;
              case AppView.QUERY:
              default:
                return <QueryView />;
            }
          };

          return (
            <div className="min-h-screen bg-slate-100">
              <Header 
                currentView={currentView} 
                onTabClick={handleTabClick} 
                isAuthenticated={isAuthenticated}
                onLogout={handleLogout}
              />
              <main className="p-4 sm:p-6 lg:p-8">
                {renderView()}
              </main>
              {isLoginModalOpen && (
                <LoginModal
                  onClose={() => setIsLoginModalOpen(false)}
                  onSuccess={handleLoginSuccess}
                />
              )}
            </div>
          );
        };

        // --- From index.tsx ---
        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(
          <React.StrictMode>
            <App />
          </React.StrictMode>
        );
      }
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>